name: "ðŸžï¸ Â» setup environment"
description: "setup all necessary tools for the workflow to run"
inputs:
  python-version:  
    description: "Version of python to install"
    required: true

defaults:
  run:
    shell: 'bash'

runs:
  using: "composite"

  steps:
    - name: ðŸžï¸ Â» setup environment
      shell: bash
      run: echo "ðŸžï¸ Â» setup environment with python ${{inputs.python-version}}"

    - name: ðŸ Â» setup python@3
      uses: actions/setup-python@v5
      shell: bash
      with:
        python-version: ${{inputs.python-version}}
        cache: "pip"

    - name: ðŸ“˜ Â» install Poetry
      shell: bash
      run: |
        curl -sSL https://install.python-poetry.org | python - -y

    - name: ðŸ‘— Â» install nox
      shell: bash
      run: |
        pip install nox nox-poetry

    - name: ðŸ§Š Â» install task
      uses: arduino/setup-task@v1
      with:
        version: 3.x

    - name: ðŸ”€ Â» update PATH env var
      shell: bash
      run: echo "$HOME/.local/bin" >> $GITHUB_PATH

    - name: ðŸ“œ Â» log sysinfo
      shell: bash
      run: |
        uname -a
        python --version
        pip --version
        poetry --version
        task --version